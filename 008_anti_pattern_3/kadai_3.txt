Lineのようなサービスを開発していると仮定する

友達に対するメッセージとグループに対するメッセージを管理したい。

「Message」「Friend」「Group」テーブルが生まれて
「Message」テーブルにtypeやbelongs_to_idカラムが生まれるとアンチパターンに陥る。